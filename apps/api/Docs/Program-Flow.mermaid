flowchart TD
    %% UI Pages/Screens (Blue rectangles)
    UserAuth["ðŸ” User Login/Register Page"]:::page
    BrowseCatalog["ðŸ“š Browse Catalog Page"]:::page  
    BrowseOwned["ðŸ“– My Programs Page"]:::page
    ViewProgram["ðŸ“‹ Program Details Page"]:::page
    ViewProduct["ðŸ›’ Product Details Page"]:::page
    ViewIncluded["ðŸ“„ Included Programs Page"]:::page
    PaymentProcess["ðŸ’³ Payment Page"]:::page
    SelectProgram["ðŸŽ¯ Program Selection Page"]:::page
    AccessContent["ðŸ“– Program Content Page"]:::page
    ViewContentItem["ðŸ“ Content Item Page"]:::page
    StartActivity["âœï¸ Activity Page"]:::page
    WaitPeerReviews["â³ Waiting for Reviews Page"]:::page
    ReviewPeerFeedback["ðŸ‘¥ Peer Review Page"]:::page
    WaitInstructor["â³ Waiting for Instructor Page"]:::page
    CertificateNotification["ðŸ† Certificate Available Page"]:::page
    GenerateCertificate["ðŸ“œ Certificate Generation Page"]:::page

    %% Business Logic (Orange diamonds/circles)
    SelectType{"Select Program or Product?"}:::logic
    CheckPrice{"Free or Paid Program?"}:::logic
    PaymentCheck{"Payment Successful?"}:::logic
    CheckActivity{"Is Activity?"}:::logic
    CheckGraded{"Graded Activity?"}:::logic
    GradingMethod{"Grading Method"}:::logic
    AcceptReview{"Accept Review?"}:::logic
    CheckMoreContent{"More Content?"}:::logic
    CheckCompletion{"Check Program Completion"}:::logic
    RequirementsMet{"Requirements Met?"}:::logic

    %% Backend Processing (Green rounded rectangles)
    AutoBuyFree["ðŸ”„ Auto-purchase Free Product"]:::process
    AutoEnroll["ðŸ”„ Auto-Enroll in Programs"]:::process
    SubmitActivity["ðŸ”„ Submit Activity"]:::process
    SubmitForGrading["ðŸ”„ Submit for Grading"]:::process
    AIGrading["ðŸ¤– AI Grading Process"]:::process
    AutoGrading["âš™ï¸ Automated Grading"]:::process
    PeerReview["ðŸ‘¥ Peer Review Process"]:::process
    InstructorReview["ðŸ‘¨â€ðŸ« Instructor Review Process"]:::process
    ReceiveGrade["ðŸ“Š Grade Processing"]:::process
    CompleteContent["âœ… Mark Content Complete"]:::process
    UpdateProgress["ðŸ“ˆ Update Progress"]:::process
    ContinueLearning["ðŸ”„ Continue Learning Process"]:::process
    CertificateIssued["ðŸ“œ Certificate Issued"]:::process
    ProgramCompleted["ðŸŽ‰ Program Completion Process"]:::process
    ReturnToCatalog["ðŸ”„ Return to Catalog"]:::process
    ReturnToProduct["ðŸ”„ Return to Product"]:::process
    SubmitReport["âš ï¸ Submit Report Process"]:::process
    GetNewPeerReview["ðŸ”„ Get New Peer Review"]:::process

    %% User Actions (Purple rounded rectangles)
    ReportProgram["âš ï¸ Report Program"]:::action
    ReportContent["âš ï¸ Report Content"]:::action
    ViewProducts["ðŸ‘€ View Products"]:::action
    PurchaseProduct["ðŸ’° Purchase Product"]:::action

    %% Flow connections
    UserAuth --> BrowseCatalog & BrowseOwned
    BrowseCatalog --> SelectType
    SelectType -- Program --> ViewProgram
    SelectType -- Product --> ViewProduct
    ViewProgram --> ReportProgram & CheckPrice
    CheckPrice -- Free --> AutoBuyFree
    CheckPrice -- Paid --> ViewProducts
    ViewProduct --> ViewIncluded & PurchaseProduct
    ViewIncluded --> ViewProgram
    PurchaseProduct --> PaymentProcess
    PaymentProcess --> PaymentCheck
    PaymentCheck -- Yes --> AutoEnroll
    PaymentCheck -- No --> ReturnToProduct
    AutoBuyFree --> AutoEnroll
    AutoEnroll --> SelectProgram
    SelectProgram --> AccessContent
    AccessContent --> ViewContentItem
    ViewContentItem --> ReportContent & CheckActivity
    CheckActivity -- No --> CompleteContent
    CheckActivity -- Yes --> StartActivity
    StartActivity --> CheckGraded
    CheckGraded -- No --> SubmitActivity
    CheckGraded -- Yes --> SubmitForGrading
    SubmitForGrading --> GradingMethod
    GradingMethod -- AI --> AIGrading
    GradingMethod -- Automation --> AutoGrading
    GradingMethod -- Peer Review --> PeerReview
    GradingMethod -- Instructor --> InstructorReview
    AIGrading --> ReceiveGrade
    AutoGrading --> ReceiveGrade
    PeerReview --> WaitPeerReviews
    WaitPeerReviews --> ReviewPeerFeedback
    ReviewPeerFeedback --> AcceptReview
    AcceptReview -- Accept --> ReceiveGrade
    AcceptReview -- Report Bad Behavior --> SubmitReport
    SubmitReport --> GetNewPeerReview
    GetNewPeerReview --> ReviewPeerFeedback
    InstructorReview --> WaitInstructor
    WaitInstructor --> ReceiveGrade
    SubmitActivity --> CompleteContent
    ReceiveGrade --> CompleteContent
    CompleteContent --> UpdateProgress
    UpdateProgress --> CheckMoreContent
    CheckMoreContent -- Yes --> AccessContent
    CheckMoreContent -- No --> CheckCompletion
    CheckCompletion --> RequirementsMet
    RequirementsMet -- Yes --> CertificateNotification
    RequirementsMet -- No --> ContinueLearning
    CertificateNotification --> GenerateCertificate
    ContinueLearning --> AccessContent
    GenerateCertificate --> CertificateIssued
    CertificateIssued --> ProgramCompleted
    ProgramCompleted --> ReturnToCatalog
    ReturnToCatalog --> BrowseCatalog
    ViewProducts --> ViewProduct
    ReturnToProduct --> ViewProduct
    BrowseOwned --> SelectProgram
    AcceptReview -- Reject --> GetNewPeerReview

    %% Styling
    classDef page fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    classDef logic fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    classDef process fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef action fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,color:#000